<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Student Registration - Kiwi English Exams</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/css/intlTelInput.min.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"></script>


    <!-- Bootstrap (optional if already added) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- intl-tel-input CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/css/intlTelInput.css" />

    <!-- intl-tel-input JS and dependencies -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"></script>


    <!-- Bootstrap CSS (if not already included) -->
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"> -->

    <!-- Country Select CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/country-select-js@2.0.1/build/css/countrySelect.min.css">

    <!-- jQuery (required for country-select) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Country Select JS -->
    <script src="https://cdn.jsdelivr.net/npm/country-select-js@2.0.1/build/js/countrySelect.min.js"></script>

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Jost:wght@500;600;700&family=Open+Sans:wght@400;600&display=swap"
        rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
    <!-- Navbar Start -->
    <div class="container-fluid p-0">
        <nav class="navbar navbar-expand-lg bg-white navbar-light py-3 py-lg-0 px-lg-5 fixed-top">
            <a href="index.html" class="navbar-brand ml-lg-3">
                <h1 class="m-0 text-uppercase text-primary"><i class="fa fa-book-reader mr-3"></i>Kiwi English Exams
                </h1>
            </a>
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-between px-lg-3" id="navbarCollapse">
                <div class="navbar-nav mx-auto py-0">
                    <a href="index.html" class="nav-item nav-link">Home</a>
                    <a href="index.html#about" class="nav-item nav-link">About</a>
                    <a href="index.html#exam" class="nav-item nav-link">Exams</a>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Pages</a>
                        <div class="dropdown-menu m-0">
                            <a href="detail.html" class="dropdown-item">Exams Detail</a>
                            <a href="index.html#feature" class="dropdown-item">Our Features</a>
                            <!-- <a href="index.html#team" class="dropdown-item">Instructors</a> -->
                            <a href="index.html#testimonial" class="dropdown-item">Testimonial</a>
                        </div>
                    </div>
                    <a href="index.html#contact" class="nav-item nav-link">Contact</a>
                </div>
                <a href="/student-registration" class="btn btn-primary py-2 px-4  active">Apply for</a>
            </div>
        </nav>
    </div>
    <!-- Navbar End -->

    <!-- Header Start -->

    <div class="jumbotron student-register-page jumbotron-fluid position-relative overlay-bottom mb-5">
        <div class="container text-center my-5 py-5">
            <h1 class="display-1" style="color: rgb(235, 180, 255);">Student Registration</h1>
        </div>
    </div>
    <!-- Header End -->

    <!-- Registration Form Start -->
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-12 col-md-10 col-lg-8">
                <div class="bg-light p-4 p-md-5 rounded">
                    <h2 class="mb-5 text-center">Register as a Student</h2>
                    <form id="studentForm">
                        <h4 class="mb-3 text-center">Student User Account Details</h4>
                        <div class="mb-3">
                            <label class="form-label">Student Email</label>
                            <input type="text" class="form-control border-0 border-bottom" id="student_email"
                                placeholder="Enter email address" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control border-0 border-bottom" id="student_password"
                                placeholder="Enter password" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Confirm Password</label>
                            <input type="password" class="form-control border-0 border-bottom"
                                id="student_password_confirmation" placeholder="Re-enter password" required>
                        </div>
                        <hr class="my-4">
                        <h4 class="mb-3 text-center">Student Personal Details</h4>
                        <div class="mb-3">
                            <label class="form-label">Student Name</label>
                            <input type="text" class="form-control border-0 border-bottom" id="student_name"
                                placeholder="Full Name" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Student Address</label>
                            <input type="text" class="form-control border-0 border-bottom" id="student_address"
                                placeholder="Address" required>
                        </div>

                        <div class="mb-3">
                            <div class="row">
                                <div class="col-6">
                                    <label class="form-label">Phone Number</label>
                                    <div class="input-group">
                                        <input type="tel" class="form-control border-0 border-bottom" id="phone"
                                            placeholder="Phone Number" required>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-check">
                                        <label class="form-label">Date of Birth</label>
                                        <input type="date" class="form-control border-0 border-bottom"
                                            id="date_of_birth" required>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Gender</label>
                            <div class="row">
                                <div class="col-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="gender" value="male" required>
                                        <label class="form-check-label" for="genderMale">Male</label>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="form-check">
                                        <input class="form-check-input" type="radio" id="gender" value="female"
                                            required>
                                        <label class="form-check-label" for="genderFemale">Female</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <hr class="my-4">

                        <h4 class="mb-3 text-center">Father / Mother / Guardian Details</h4>

                        <div class="mb-3">
                            <label class="form-label">Father / Mother / Guardian Name</label>
                            <input type="text" class="form-control border-0 border-bottom" id="guardian_name"
                                placeholder="Guardian Name" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Father / Mother / Guardian Address</label>
                            <input type="text" class="form-control border-0 border-bottom" id="guardian_address"
                                placeholder="Guardian Address" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Father / Mother / Guardian Phone Number</label>
                            <div class="input-group">
                                <input type="tel" class="form-control border-0 border-bottom" id="guardian_phone"
                                    placeholder="Phone Number" required>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary py-2 px-4 mt-3 d-block mx-auto">Register
                            Now</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Registration Form End -->

    <!-- Footer Start -->
    <div class="container-fluid position-relative overlay-top bg-dark text-white-50 py-5" style="margin-top: 90px;">
        <div class="container">
            <div class="row">
                <!-- Brand & Description -->
                <div class="col-md-12 mt-5">
                    <a href="index.html" class="navbar-brand">
                        <h1 class="mt-n2 text-uppercase text-white">
                            <i class="fa fa-book-reader me-2"></i> Kiwi English Exams
                        </h1>
                    </a>
                    <p class="m-0 text-justify mt-1">
                        At Kiwi English Exams, we are your trusted partner in mastering English proficiency tests across
                        New Zealand and beyond. Whether you're preparing for academic, professional, or immigration
                        purposes, our expert guidance, proven strategies, and personalized support will help you achieve
                        the results you need. Join thousands of successful learners who have reached their goals with
                        confidence and clarity.
                    </p>
                </div>
            </div>

            <div class="row">
                <!-- Contact Info -->
                <div class="col-md-8 mt-4">
                    <h3 class="text-white">Get In Touch</h3>
                    <p><i class="fa fa-map-marker-alt me-2"></i>123 Lambton Quay, Wellington Central, Wellington 6011,
                        New Zealand</p>
                    <p><i class="fa fa-phone-alt me-2"></i>+64 21 987 6543</p>
                    <p><i class="fa fa-envelope me-2"></i>info@kiwienglishexams.nz</p>
                </div>

                <!-- Social Media -->
                <div class="col-md-4 mt-4 text-justify">
                    <!-- First Row: Heading -->
                    <div class="mb-3">
                        <h3 class="text-white mb-0">Follow Us</h3>
                    </div>

                    <!-- Second Row: Icons -->
                    <div class="d-flex flex-row justify-content-start">
                        <a class="text-white mr-4" href="#"><i class="fab fa-2x fa-twitter"></i></a>
                        <a class="text-white mr-4" href="#"><i class="fab fa-2x fa-facebook-f"></i></a>
                        <a class="text-white mr-4" href="#"><i class="fab fa-2x fa-linkedin-in"></i></a>
                        <a class="text-white" href="#"><i class="fab fa-2x fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid bg-dark text-white-50 border-top py-4"
        style="border-color: rgba(256, 256, 256, .1) !important;">
        <div class="container">
            <div class="row">
                <div class="col-md-6 text-center text-md-left mb-3 mb-md-0">
                    <p class="m-0">Copyright &copy; <a class="text-white" href="#">kiwiexams.netlify.app</a>. All Rights
                        Reserved.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->

    <!-- Back to Top -->
    <a href="student-registration.html" class="btn btn-lg btn-primary rounded-0 btn-lg-square back-to-top"><i
            class="fa fa-angle-double-up"></i></a>


    <script>
        const itiInstances = {}; // to store each input's instance
        const phoneInputs = ["#phone", "#guardian_phone"];

        phoneInputs.forEach((selector) => {
            const input = document.querySelector(selector);
            if (!input) return;

            const iti = window.intlTelInput(input, {
                initialCountry: "auto",
                geoIpLookup: function (success, failure) {
                    fetch("https://ipapi.co/json")
                        .then((res) => res.json())
                        .then((data) => success(data.country_code))
                        .catch(() => success("us"));
                },
                utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/utils.js",
            });

            // Save instance for later use
            itiInstances[selector] = iti;
        });

        // Example usage when submitting a form:
        function getPhoneNumbers() {
            const phone = itiInstances["#phone"]?.getNumber() || "";
            const guardianPhone = itiInstances["#guardian_phone"]?.getNumber() || "";

            // console.log("Student Phone:", phone);
            // console.log("Guardian Phone:", guardianPhone);

            return { phone, guardianPhone };
        }
    </script>

    <script>
        $(document).ready(function () {
            $("#country").countrySelect({
                defaultCountry: "us", // or "auto" for geo IP lookup
                preferredCountries: ['us', 'gb', 'lk', 'in'] // you can customize this
            });
        });
    </script>

    <script>
        document.getElementById('studentForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const { phone, guardianPhone } = getPhoneNumbers();
            student_email = document.getElementById('student_email').value;
            student_password = document.getElementById('student_password').value;
            student_password_confirmation = document.getElementById('student_password_confirmation').value;
            student_name = document.getElementById('student_name').value;
            student_address = document.getElementById('student_address').value;
            student_phone = phone
            date_of_birth = document.getElementById('date_of_birth').value;
            gender = document.getElementById('gender').value;
            guardian_name = document.getElementById('guardian_name').value;
            guardian_address = document.getElementById('guardian_address').value;
            guardian_phone = guardianPhone;


            if (student_password !== student_password_confirmation) {
                showMessage('Passwords do not match!', 'danger');
                return;
            }

            fetch(`https://b-end-test.netlify.app/.netlify/functions/add-student`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    student_email,
                    student_password,
                    student_name,
                    student_address,
                    student_phone,
                    date_of_birth,
                    gender,
                    guardian_name,
                    guardian_address,
                    guardian_phone,
                }),
            })
                .then(res => res.json())
                .then(data => {
                    if (data.message || data._id) {
                        window.location.href = 'login.html';
                    } else {
                        alert('Insert failed: ' + (data.error || 'Unknown error'));
                    }
                })
                .catch(err => {
                    console.error('❌ Insert error:', err);
                    alert('Network error while updating.');
                });
        });

    </script>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>

    <script>
        document.addEventListener('click', function (event) {
            var navbarCollapse = document.getElementById('navbarCollapse');
            var isClickInsideNavbar = navbarCollapse.contains(event.target);

            // Check if the navbar is open
            var isNavbarOpen = navbarCollapse.classList.contains('show');

            if (!isClickInsideNavbar && isNavbarOpen) {
                // If the click is outside and the navbar is open, collapse it
                $('.navbar-collapse').collapse('hide');
            }
        });
    </script>

</body>

</html>